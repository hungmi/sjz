<div class="row page-header">
  <div class="col-xs-12 col-sm-6">
    <h1>
      <%= link_to_unless (@folder.id == 1), t("admin.#{controller_name}.index.header"), admin_folder_docs_path(folder_id: 1), style: "text-decoration: none;" %>
      <br class="visible-xs-inline">
      <%= new_breadcrumb @folder %>
    </h1>
  </div>
  <%= render "actions", folder: @folder %>
</div>

<div class="docks table-responsive">
  <table class="table table-hover">
    <thead>
      <tr>
        <th>檔案名稱</th>
        <th>修改紀錄</th>
        <th></th>
      </tr>
    </thead>
    <tbody class="folders">
      <%= render partial: "admin/folders/folder", collection: @folder.children, as: :folder %>
    </tbody>
    <tbody class="docs" style="border-top: 1px solid #ddd;">
      <%= render @docs %>
    </tbody>
  </table>
</div>

<%= render "doc_share_modal" %>

<%= render "admin/common/modal", model_name: "Folder", title: I18n.t("admin.folders.new.header"), remote_save: true do %>
  <% simple_form_for [:admin, Folder.new] do |f| %>
    <%= f.input :name %>
    <%= f.input :parent_id, input_html: { value: params[:folder_id] }, as: :hidden %>
  <% end %>
<% end %>

<script type="text/javascript">
  $(document).on("ajaxModalSuccess", function(xhr, data) {
    $(document).find("tbody.folders").append(data)
  })
</script>